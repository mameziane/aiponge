{
  "Comment": "Aiponge CDN Distribution - Audio and Static Assets",
  "Origins": {
    "Quantity": 2,
    "Items": [
      {
        "Id": "S3-aiponge-assets",
        "DomainName": "${S3_BUCKET_NAME}.s3.${AWS_REGION}.amazonaws.com",
        "S3OriginConfig": {
          "OriginAccessIdentity": "origin-access-identity/cloudfront/${CLOUDFRONT_OAI_ID}"
        }
      },
      {
        "Id": "ALB-aiponge-api",
        "DomainName": "${ALB_DNS_NAME}",
        "CustomOriginConfig": {
          "HTTPPort": 80,
          "HTTPSPort": 443,
          "OriginProtocolPolicy": "https-only",
          "OriginSSLProtocols": ["TLSv1.2"]
        }
      }
    ]
  },
  "DefaultCacheBehavior": {
    "TargetOriginId": "ALB-aiponge-api",
    "ViewerProtocolPolicy": "redirect-to-https",
    "AllowedMethods": ["DELETE", "GET", "HEAD", "OPTIONS", "PATCH", "POST", "PUT"],
    "CachedMethods": ["GET", "HEAD"],
    "ForwardedValues": {
      "QueryString": true,
      "Headers": ["Authorization", "Origin", "Accept"]
    },
    "MinTTL": 0,
    "DefaultTTL": 0,
    "MaxTTL": 0,
    "Compress": true
  },
  "CacheBehaviors": {
    "Quantity": 2,
    "Items": [
      {
        "PathPattern": "/audio/*",
        "TargetOriginId": "S3-aiponge-assets",
        "ViewerProtocolPolicy": "redirect-to-https",
        "AllowedMethods": ["GET", "HEAD", "OPTIONS"],
        "CachedMethods": ["GET", "HEAD"],
        "ForwardedValues": {
          "QueryString": false,
          "Headers": ["Origin", "Access-Control-Request-Headers", "Access-Control-Request-Method"]
        },
        "MinTTL": 86400,
        "DefaultTTL": 604800,
        "MaxTTL": 31536000,
        "Compress": true
      },
      {
        "PathPattern": "/images/*",
        "TargetOriginId": "S3-aiponge-assets",
        "ViewerProtocolPolicy": "redirect-to-https",
        "AllowedMethods": ["GET", "HEAD"],
        "CachedMethods": ["GET", "HEAD"],
        "ForwardedValues": {
          "QueryString": false
        },
        "MinTTL": 86400,
        "DefaultTTL": 604800,
        "MaxTTL": 31536000,
        "Compress": true
      }
    ]
  },
  "PriceClass": "PriceClass_100",
  "Enabled": true,
  "HttpVersion": "http2and3"
}
