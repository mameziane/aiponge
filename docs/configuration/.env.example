# =============================================================================
# Aiponge Platform - Complete Environment Variables Reference
# =============================================================================
# This file documents ALL environment variables used across the platform.
# Copy to .env and configure values for your environment.
#
# Source of truth: packages/platform-core/src/config/environment-config.ts
# (ProductionEnvPresets)

# =============================================================================
# CORE (Required for ALL services)
# =============================================================================

NODE_ENV=development

# JWT signing secret for authentication (min 32 chars, cryptographically random)
# Generate: openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-key-change-in-production-must-be-long

# Secret for inter-service communication (HMAC-signed)
# Generate: openssl rand -base64 32
INTERNAL_SERVICE_SECRET=your-internal-service-secret-here

# AES-256-GCM key for data encryption (journal entries, sensitive data)
# Generate: openssl rand -base64 32
ENTRY_ENCRYPTION_KEY=your-entry-encryption-key-here

# =============================================================================
# PER-SERVICE DATABASES (Required - each service needs its own in production)
# =============================================================================
# In development, all services can share a single DATABASE_URL.
# In production, each service MUST have its own isolated database URL.

# Shared fallback (development only)
DATABASE_URL=postgresql://postgres:your_password@localhost:5432/aiponge

# Service-specific database URLs (required in production)
# SYSTEM_DATABASE_URL=postgresql://postgres:password@host:5432/aiponge_system
# AI_CONFIG_DATABASE_URL=postgresql://postgres:password@host:5432/aiponge_ai_config
# AI_CONTENT_DATABASE_URL=postgresql://postgres:password@host:5432/aiponge_ai_content
# AI_ANALYTICS_DATABASE_URL=postgresql://postgres:password@host:5432/aiponge_ai_analytics
# MUSIC_DATABASE_URL=postgresql://postgres:password@host:5432/aiponge_music
# STORAGE_DATABASE_URL=postgresql://postgres:password@host:5432/aiponge_storage

# =============================================================================
# SECURITY
# =============================================================================

# Bcrypt hashing rounds (default: 12)
# BCRYPT_ROUNDS=12

# Comma-separated list of allowed CORS origins
ALLOWED_ORIGINS=http://localhost:5000,http://localhost:3000

# Encryption key for thought/journal entries
# Generate: openssl rand -base64 32
# THOUGHT_ENCRYPTION_KEY=your-thought-encryption-key-here

# =============================================================================
# REDIS (Caching, Rate Limiting, Pub/Sub)
# =============================================================================

REDIS_URL=redis://localhost:6379
# CACHE_TTL=3600

# =============================================================================
# RATE LIMITING
# =============================================================================

# Max requests per window for unauthenticated users (default: 100)
# RATE_LIMIT_MAX_REQUESTS=100

# Max requests per window for authenticated users (default: 200)
# RATE_LIMIT_AUTH_MAX=200

# Divisor for in-memory rate limit fallback (default: 4 in prod, 1 in dev)
# RATE_LIMIT_FALLBACK_DIVISOR=4

# =============================================================================
# AI PROVIDERS
# =============================================================================

# OpenAI (GPT, Whisper, DALL-E)
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_TIMEOUT=30000

# Anthropic (Claude)
ANTHROPIC_API_KEY=your_anthropic_api_key_here
ANTHROPIC_BASE_URL=https://api.anthropic.com
ANTHROPIC_TIMEOUT=30000

# Google AI (Gemini)
GOOGLE_API_KEY=your_google_api_key_here

# ElevenLabs (Voice synthesis)
ELEVENLABS_API_KEY=your_elevenlabs_api_key_here
ELEVENLABS_BASE_URL=https://api.elevenlabs.io/v1
ELEVENLABS_TIMEOUT=30000

# Stability AI (Image generation)
STABILITY_AI_API_KEY=your_stability_ai_api_key_here

# Primary AI provider API key (legacy fallback)
# AI_PROVIDER_API_KEY=

# =============================================================================
# MUSIC GENERATION (MusicAPI.ai)
# =============================================================================

MUSICAPI_API_KEY=your_musicapi_key_here
MUSICAPI_BASE_URL=https://api.musicapi.ai
# MUSIC_API_MAX_CONCURRENCY=10

# =============================================================================
# PAYMENTS (RevenueCat)
# =============================================================================

# RevenueCat API key for server-side in-app purchase validation
# REVENUECAT_API_KEY=your-revenuecat-api-key-here

# =============================================================================
# FILE STORAGE (AWS S3)
# =============================================================================

# AWS_ACCESS_KEY_ID=your_aws_access_key
# AWS_SECRET_ACCESS_KEY=your_aws_secret_key
# AWS_REGION=us-east-1
# S3_BUCKET=aiponge-storage
# CDN_URL=https://cdn.aiponge.com

# =============================================================================
# EMAIL (SendGrid)
# =============================================================================

# SENDGRID_API_KEY=your_sendgrid_api_key_here
# EMAIL_FROM=noreply@aiponge.com

# =============================================================================
# MONITORING & ERROR TRACKING
# =============================================================================

# Sentry DSN for error tracking and performance monitoring
# Get your DSN from: https://sentry.io
SENTRY_DSN=

# API key for analytics service
# ANALYTICS_SERVICE_API_KEY=

# =============================================================================
# SERVICE URLS (Auto-resolved in development via service discovery)
# =============================================================================
# Only set these in production or to override auto-discovery.

# SYSTEM_SERVICE_URL=http://localhost:3001
# STORAGE_SERVICE_URL=http://localhost:3002
# AI_ANALYTICS_SERVICE_URL=http://localhost:3006

# =============================================================================
# EXPO / MOBILE APP
# =============================================================================

# RevenueCat public keys for mobile
# EXPO_PUBLIC_REVENUECAT_IOS_KEY=your-ios-key
# EXPO_PUBLIC_REVENUECAT_ANDROID_KEY=your-android-key

# Sentry DSN for Expo mobile app
# EXPO_PUBLIC_SENTRY_DSN=

# Expo access token for CI/CD builds
# EXPO_TOKEN=

# =============================================================================
# SERVICE PORTS (AUTO-CONFIGURED - DO NOT SET)
# =============================================================================
# Services auto-read ports from generated manifests.
# Single Source of Truth: packages/platform-core/src/config/services-definition.ts
#
# Reference ports (for documentation only - DO NOT uncomment):
#   SYSTEM_SERVICE_PORT=3001
#   STORAGE_SERVICE_PORT=3002
#   USER_SERVICE_PORT=3003
#   AI_CONFIG_SERVICE_PORT=3004
#   AI_CONTENT_SERVICE_PORT=3005
#   AI_ANALYTICS_SERVICE_PORT=3006
#   MUSIC_SERVICE_PORT=3007
#   API_GATEWAY_PORT=8080

# =============================================================================
# DEVELOPMENT ENVIRONMENT
# =============================================================================

HOST=0.0.0.0
SERVICE_HOST=localhost
LOG_LEVEL=info

# =============================================================================
# REPLIT ENVIRONMENT (AUTO-DETECTED)
# =============================================================================
# These are automatically set by Replit:
# REPLIT=true
# REPLIT_DEV_DOMAIN=xxx.replit.dev
# DATABASE_URL=<replit-provided>

# =============================================================================
# OPENTELEMETRY DISTRIBUTED TRACING
# =============================================================================

OTEL_TRACING_ENABLED=false
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318/v1/traces
